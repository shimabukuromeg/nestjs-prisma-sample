name: Create Issue on Renovate PR

on:
  pull_request:
    types: [opened]

jobs:
  create_issue:
    runs-on: ubuntu-latest
    steps:
      - name: Create Issue from PR
        uses: actions/github-script@v6
        with:
          script: |
            const pr = context.payload.pull_request;
            if (pr.user.login === 'renovate[bot]') {
              const issue = {
                owner: context.repo.owner,
                repo: context.repo.repo,
                title: 'Issue for Renovate PR #' + context.issue.number,
                body: `このIssueは、Renovate がPRを生成したことをトリガーに生成しています。Created by #${pr.number}`,
                labels: ['renovate'],
                assignees: ['shimabukuromeg'],
              };
              await github.rest.issues.create(issue);
            }
